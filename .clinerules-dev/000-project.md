# このプロジェクト

このプロジェクトは `TripQuota` という名前のサイトを作る。サイトは複数人で旅行をする時に、旅客機チケット、バスや電車のチケット、宿泊先ホテル、eSim 変更に伴う電話番号の変更などを共有する。

## 利用想定

ここに利用シーンを仮定してサイト利用の流れを把握する。

Aさん、Bさん、Cさんの三人で、日本から韓国のソウルに行く事になった。

まず役割分担としてAさんがチケット、Bさんが宿泊先、Cさんがそれぞれの観光地を探す事にした。それぞれの事が別々なのでチャットだけでは難しく、タイムラインとして表示させるため `TripQuota` を使う事にした。期間は 2024年10月10日〜2024年10月13日の三日間としている。AさんはBさんとCさんのメールアドレスを知っているので、AさんはTripQuotaにアカウントを作成し、旅行計画を作成した後に、BさんCさんを誘った。まず、旅行計画には出発日と帰国日が記入する。今回は経由地はない。

AさんはBさんとCさんに、自身が乗る飛行機の便、出発時刻と到着時刻（現地）を連絡するため、サイトに自身が搭乗予定として登録をする。BさんとCさんにはメールで通知され、同様の便を探し各自でチケット購入をした。
Bさんはホテルも一緒がいいだろうとなり、一つのホテルで三人分の二泊を登録をしようとした。しかし、一つのホテルは一泊しか取れず、結局、三人は二泊するホテルのうち10日〜11日宿泊のホテルと11日〜12日の宿泊のホテルが別々になり、Bさんは三人のホテルが初日、二日目のそれぞれを入力した。
Cさんはメジャな観光地等をGoogleMapやwebサイト、雑誌の切り抜き、または打ち込みをして共有する事にした。

当日、韓国に着いた時、三人で食事をした。その時、Aさんが合算をして支払いをした。この時はカードで支払いをした。二日目、朝食はAさんとCさんの二人が外でして、Cさんが現金で支払いを二人分した。`TripQuota`には、二日目の朝にAさんとCさんの朝食代をいくら払ったという割り勘ログを付けた。TripQuota には won でログ付けされ、後にAさんは円でCさんに支払いをする。

最終日の翌日になって、AさんBさんCさん宛に、支払いの未記入がないか通知され、割り勘の未記入分を記入し、おのおのが誰に対して日本円でどれだけ払えばいいか計算されて送られる。

# サイトの特徴

グループ内で旅行に関する共有をするのが目的である。

## 辞書

いくつかサイト内の表記揺れを防ぐため、言葉を決めておく。

| 言葉 | 意味 |
| :----- | :----- |
| サイトの登録 | サイトの登録は、メールアドレス・OAuthなど外部サイトログインで、サイトにアカウントを作成する事である |
| アカウント | サイトに登録をしたデータの事。|
| メンバー | 旅行する人の事。アカウントがあれば、無い場合もある。|
| グループ | メンバーの集まり。|
| コアグループ | 主となるグループ。旅行する全メンバーが集まっている |
| 班グループ | コアグループの中から、一部のメンバーが集まって行動する時に使うグループ |
| 時刻 | 時間の事。明記がない限り現地のタイムゾーンを使う。メンバーが日本在住の場合は、出発時は日本時刻になり、旅行先が韓国の時は、到着時間は韓国時間になる |
| 出発日 | 旅行の開始日である。この時刻は初めに旅行計画をたてたメンバーの国のタイムゾーンに依存するが、入力時の国のタイムゾーンとなり、後にタイムゾーンは変更可能 |
| 帰宅日 | 旅行の最終日である。出発日同様、タイムゾーンの変更は可能である|

# サイトの機能

サイトの実装する機能を書く。

## [機能] 旅行計画

メンバー数はとわず、１回の旅行の計画を作る場所。

- 旅行計画には、グループと旅程の最低二つが必須になる。それぞれの最低限の情報を入力したら旅行計画は作成できる。
- 旅行計画で出発日を迎えても、帰宅日が未記入の時は、旅行計画を破棄するか、帰宅日を入力するかのどちらか選択しないと使えないようにする。
- 別の旅行計画が日程が重なっているメンバーがいる時、そのメンバーはアラートが表示される。
- 旅行計画からメンバーがいなくなったら、旅行計画のデータは全て破棄する。
- 旅行計画は削除権限を持ったメンバーがおり、基本は作成者とする。
- 削除権限は他のメンバーに委譲する事ができる。
- 旅行計画から作成者が抜ける時は、削除権限は別のメンバーに委譲しているのが前提である。

## [機能] グループ

主となる旅行のメンバーを招待する機能である。
旅行計画を作成したメンバーが最小単位である。
リーダーと言うのは特に決めない。
必要に応じて、`TripQuota`に登録していないメンバーの代筆できる機能がある。

グループは、コアグループとブランチグループに分かれる。

- コアグループ : メンバー全員が集まっているグループ。誰がいつからいつまで、どこに宿泊している等といった情報が見れる。
- 班グループ : コアグループから一部のメンバーが集まって別行動するときのグループ。

## [機能] 旅程入力

- 旅行計画の出発日から帰宅日までの期間の事である。
    - 出発日だけが決まっている場合があり、最終日は未記入でも旅行計画は作成できる。
    - ただし、未記入のまま出発日になった時、旅行計画は停止して、最終日の入力が必須となる。
    - 出発日から帰宅日の最長期間は120日までとする。
    - これはメンバーごとに違うが、サイトにまだアカウント作成してない等といった必要に応じて、他のメンバーの情報を書く事もある。
    - 飛行機やフェリーなどは全員で行動する事が多いので、メンバーを選択して、移動手段を入力する。
- 入力に必須なのは、移動手段（徒歩・バイク・車・フェリー・バス・飛行機）の情報と、宿泊先のホテル名である。
    - 移動手段が飛行機の場合は航空会社、便名、出発時刻、到着時刻の入力が必須になる。

## [機能] メンバー管理

思案中

## [機能] 割り勘入力

思案中

## [機能] 通知機能

思案中

## [機能] アカウント登録

登録方法はいくつかある。

1. メールアドレス・パスワード
2. OAuth で別サイトアカウントでの登録

## [機能] ログイン

ログインをしないと、旅行計画の作成などといった各機能が使えないとする。

